---
import { useTranslations } from "../i18n";
import type { Language } from "../i18n/languages";
import GitHub from "./icons/GitHub.astro";
import LinkedIn from "./icons/LinkedIn.astro";
import Mail from "./icons/Mail.astro";

const currentLocale = (Astro.currentLocale || 'es') as Language;
const t = useTranslations(currentLocale);
const currentYear = new Date().getFullYear();

// Datos personales centralizados
const p = t.personal;
const isEn = currentLocale === 'en';

const footerLinks = [
  { href: isEn ? '/en/#about' : '/#sobre-mi', label: t.nav.about },
  { href: isEn ? '/en/#experience' : '/#experiencia', label: t.nav.experience },
  { href: isEn ? '/en/#education' : '/#educacion', label: t.nav.education },
  { href: isEn ? '/en/#certifications' : '/#certificados', label: t.nav.projects },
  { href: isEn ? '/en/#stack' : '/#stack', label: t.nav.stack },
  { href: isEn ? '/en/#blog' : '/#blog', label: t.nav.blog },
  { href: isEn ? '/en/#projects' : '/#proyectos', label: t.nav.myProjects },
];
---

<footer class="mt-20 border-t border-gray-200 dark:border-gray-800">
  <div class="container mx-auto px-4 py-12 lg:max-w-4xl md:max-w-2xl">
    <div class="grid gap-8 md:grid-cols-3">
      <!-- Branding -->
      <div class="space-y-4 text-center md:text-left">
        <h3 class="text-lg font-bold text-gray-900 dark:text-white">{p.name}</h3>
        <p class="text-sm text-gray-600 dark:text-gray-400">{p.jobTitle}</p>
        <p class="text-sm text-gray-500 dark:text-gray-500">üìç {p.location}</p>
      </div>

      <!-- Navigation -->
      <div class="space-y-4 text-center md:text-left">
        <h4 class="text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider">
          {isEn ? 'Navigation' : 'Navegaci√≥n'}
        </h4>
        <ul class="grid grid-cols-2 gap-x-4 gap-y-2">
          {footerLinks.map((link) => (
            <li>
              <a 
                href={link.href} 
                class="text-sm text-gray-600 dark:text-gray-400 hover:text-violet-600 dark:hover:text-violet-400 transition"
              >
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      </div>

      <!-- Social -->
      <div class="space-y-4 text-center md:text-left">
        <h4 class="text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider">
          {isEn ? 'Connect' : 'Contacto'}
        </h4>
        <div class="flex gap-4 justify-center md:justify-start">
          <a
            href={p.linkedin}
            target="_blank"
            rel="noopener"
            class="flex items-center justify-center size-10 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-violet-100 dark:hover:bg-violet-900/40 hover:text-violet-600 dark:hover:text-violet-400 transition"
            aria-label="LinkedIn"
          >
            <LinkedIn class="size-5" />
          </a>
          <a
            href={p.github}
            target="_blank"
            rel="noopener"
            class="flex items-center justify-center size-10 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-violet-100 dark:hover:bg-violet-900/40 hover:text-violet-600 dark:hover:text-violet-400 transition"
            aria-label="GitHub"
          >
            <GitHub class="size-5" />
          </a>
          <a
            href={`mailto:${p.email}`}
            class="flex items-center justify-center size-10 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-violet-100 dark:hover:bg-violet-900/40 hover:text-violet-600 dark:hover:text-violet-400 transition"
            aria-label="Email"
          >
            <Mail class="size-5" />
          </a>
        </div>
      </div>
    </div>

    <!-- Bottom bar -->
    <div class="mt-10 pt-6 border-t border-gray-200 dark:border-gray-800 flex flex-col sm:flex-row items-center justify-between gap-4">
      <p class="text-sm text-gray-500 dark:text-gray-500">
        ¬© {currentYear} {p.name}.
      </p>
      <p class="text-sm text-gray-500 dark:text-gray-500">
        {t.footer.madeWith} ‚òïÔ∏è & üíú
      </p>
    </div>
  </div>
</footer>
