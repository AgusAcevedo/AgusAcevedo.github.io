---
import { useTranslations } from "../i18n";
import type { Language } from "../i18n/languages";
import Calendar from "./icons/Calendar.astro";
import Certificate from "./icons/Certificate.astro";

const currentLocale = (Astro.currentLocale || 'es') as Language;
const t = useTranslations(currentLocale);
---

<article class="space-y-10">
  <!-- Stats Cards -->
  <div class="grid grid-cols-2 gap-4 sm:gap-6 px-4 sm:px-0 reveal-on-scroll">
    <!-- Years in IT -->
    <div class="group relative overflow-hidden rounded-2xl border border-violet-200 dark:border-violet-800/40 bg-white/80 dark:bg-gray-900/60 p-6 transition-all duration-300 hover:border-violet-400 dark:hover:border-violet-600 hover:shadow-lg hover:shadow-violet-500/10">
      <div class="absolute -right-4 -top-4 size-24 rounded-full bg-violet-500/10 blur-2xl transition-all duration-300 group-hover:bg-violet-500/20"></div>
      <div class="relative flex flex-col items-center text-center sm:flex-row sm:items-start sm:text-left gap-4">
        <div class="flex size-12 shrink-0 items-center justify-center rounded-xl bg-violet-100 dark:bg-violet-900/40 text-violet-600 dark:text-violet-400">
          <Calendar class="size-6" />
        </div>
        <div>
          <p class="text-3xl font-bold text-violet-600 dark:text-violet-400">{t.about.stats.yearsInIT.value}</p>
          <p class="text-sm text-gray-600 dark:text-gray-400">{t.about.stats.yearsInIT.label}</p>
        </div>
      </div>
    </div>

    <!-- Course Certificates -->
    <div class="group relative overflow-hidden rounded-2xl border border-violet-200 dark:border-violet-800/40 bg-white/80 dark:bg-gray-900/60 p-6 transition-all duration-300 hover:border-violet-400 dark:hover:border-violet-600 hover:shadow-lg hover:shadow-violet-500/10">
      <div class="absolute -right-4 -top-4 size-24 rounded-full bg-violet-500/10 blur-2xl transition-all duration-300 group-hover:bg-violet-500/20"></div>
      <div class="relative flex flex-col items-center text-center sm:flex-row sm:items-start sm:text-left gap-4">
        <div class="flex size-12 shrink-0 items-center justify-center rounded-xl bg-violet-100 dark:bg-violet-900/40 text-violet-600 dark:text-violet-400">
          <Certificate class="size-6" />
        </div>
        <div>
          <p class="text-3xl font-bold text-violet-600 dark:text-violet-400">{t.about.stats.courseCertificates.value}</p>
          <p class="text-sm text-gray-600 dark:text-gray-400">{t.about.stats.courseCertificates.label}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Content paragraphs -->
  <div
    class="[&>p>strong]:text-violet-600 dark:[&>p>strong]:text-violet-300 [&>p>strong]:font-normal [&>p>strong]:font-mono text-pretty text-gray-700 dark:text-gray-300 text-justify space-y-4 px-4 sm:px-0"
  >
    {t.about.content.map((paragraph, index) => (
      <p 
        set:html={paragraph} 
        class="reveal-on-scroll"
        style={`transition-delay: ${index * 100}ms`}
      ></p>
    ))}
  </div>
</article>

<style>
  .reveal-on-scroll {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .reveal-on-scroll.revealed {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1,
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('revealed');
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  document.querySelectorAll('.reveal-on-scroll').forEach((el) => {
    observer.observe(el);
  });
</script>
