---
import { useTranslations } from "../i18n";
import type { Language } from "../i18n/languages";
import GraduationCap from "./icons/GraduationCap.astro";

const currentLocale = (Astro.currentLocale || 'es') as Language;
const t = useTranslations(currentLocale);
const EDUCATION = t.education.items;
---

<div class="grid gap-6 md:grid-cols-2 px-4 sm:px-0">
  {
    EDUCATION.map((edu, index) => (
      <article 
        class="edu-card group relative overflow-hidden rounded-2xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900/50 p-6 transition-all hover:border-violet-400 dark:hover:border-violet-600 hover:shadow-xl hover:shadow-violet-500/10 dark:hover:shadow-violet-500/5"
        style={`transition-delay: ${index * 100}ms`}
      >
        <!-- Header with Icon -->
        <div class="flex items-start gap-4 mb-4">
          <div class="flex size-12 items-center justify-center rounded-xl bg-violet-100 dark:bg-violet-900/40 text-violet-600 dark:text-violet-400 border border-violet-200 dark:border-violet-800/40 group-hover:scale-110 transition-transform flex-shrink-0">
            <GraduationCap class="size-6" />
          </div>
          <div class="flex-1 min-w-0">
            <h3 class="text-lg font-bold text-gray-800 dark:text-white leading-tight mb-1">
              {edu.degree}
            </h3>
            <p class="text-violet-600 dark:text-violet-400 font-medium text-base">
              {edu.institution}
            </p>
          </div>
        </div>

        <!-- Details -->
        <div class="space-y-2">
          <p class="text-sm text-gray-600 dark:text-gray-400">
            {edu.field}
          </p>
          <div class="inline-flex items-center text-xs text-gray-500 dark:text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1.5 rounded-full">
            {edu.date}
          </div>
        </div>

        <!-- Decorative gradient -->
        <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-violet-500/5 to-transparent rounded-full blur-2xl -z-10 group-hover:from-violet-500/10 transition-all" />
      </article>
    ))
  }
</div>

<style>
  .edu-card {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out, border-color 0.3s, box-shadow 0.3s;
  }

  .edu-card.revealed {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1,
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('revealed');
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  document.querySelectorAll('.edu-card').forEach((el) => {
    observer.observe(el);
  });
</script>
